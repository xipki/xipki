<?xml version="1.0" encoding="UTF-8"?>
<features xmlns="http://karaf.apache.org/xmlns/features/v1.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" name="tms-${project.version}" xsi:schemaLocation="http://karaf.apache.org/xmlns/features/v1.0.0 http://karaf.apache.org/xmlns/features/v1.0.0">
	<!--
        Aggregate core features

        feature url is:
        mvn:org.xipki/features/${project.version}/xml/features
    -->
	<!--
        TODO: test if this is actually required for dependency resolution

        Repositories with external feature dependencies
    -->
	<repository>mvn:org.apache.karaf.assemblies.features/standard/2.3.3/xml/features</repository>
	<!--
        Note: instead of defining all features monolithically in a central features file,
        Project-plugins should be defined in their own feature descriptors and then aggregated later
    -->
	<feature name="bouncycastle" version="${bc.version}" resolver="(obr)">
		<bundle>mvn:org.bouncycastle/bcprov-jdk15on/${bc.version}</bundle>
		<bundle>mvn:org.bouncycastle/bcpkix-jdk15on/${bc.version}</bundle>
	</feature>
	<feature name="commons-dbcp" version="1.4" resolver="(obr)">
		<bundle>mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.commons-pool/1.5.4_4</bundle>
		<bundle>mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.commons-dbcp/1.4_3</bundle>
		<bundle>mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.commons-lang/2.4_6</bundle>
	</feature>
	<feature name="jdbc-db2" version="10.5.0" resolver="(obr)" description="IBM DB2 Universal JDBC Driver">
		<bundle>wrap:mvn:com.ibm.db2.jcc/db2jcc4/10.5.0</bundle>
		<bundle>wrap:mvn:com.ibm.db2.jcc/db2jcc_license_cu/10.5.0</bundle>
	</feature>
	<feature name="mysql" version="5.1.16" resolver="(obr)" description="OSGI Enterprise JDBC support with MySQL implementation">
		<!--feature>transaction</feature-->
		<bundle>mvn:mysql/mysql-connector-java/5.1.16</bundle>
	</feature>
	<feature name="xipki-datasource" version="${project.version}" resolver="(obr)">
		<feature>commons-dbcp</feature>
		<bundle>mvn:org.xipki/security-common/${project.version}</bundle>
		<bundle>mvn:org.xipki/datasource-api/${project.version}</bundle>
		<bundle>mvn:org.xipki/datasource-impl/${project.version}</bundle>
	</feature>
	<feature name="xipki-security" version="${project.version}" resolver="(obr)">
		<feature>bouncycastle</feature>
		<bundle>mvn:org.xipki/security-common/${project.version}</bundle>
		<bundle>mvn:org.xipki/security-api/${project.version}</bundle>
		<bundle>wrap:mvn:at.tugraz.iaik/iaikPkcs11Wrapper/${pkcs11Wrapper.version}</bundle>
		<bundle>mvn:org.xipki/security-iaikp11/${project.version}</bundle>
		<bundle>mvn:org.xipki/security-sunp11/${project.version}</bundle>
		<bundle>mvn:org.xipki/security-core/${project.version}</bundle>
	</feature>
	<feature name="xipki-remotep11" version="${project.version}" resolver="(obr)">
		<feature>bouncycastle</feature>
		<bundle>mvn:org.xipki/security-common/${project.version}</bundle>
		<bundle>mvn:org.xipki/security-api/${project.version}</bundle>
		<bundle>mvn:org.xipki.remotep11/remotep11-common/${project.version}</bundle>
		<bundle>mvn:org.xipki.remotep11/remotep11-client/${project.version}</bundle>
	</feature>
	<feature name="xipki-ca-api" version="${project.version}" resolver="(obr)">
		<bundle>mvn:org.xipki/security-common/${project.version}</bundle>
		<bundle>mvn:org.xipki/ca-common/${project.version}</bundle>
		<bundle>mvn:org.xipki/ca-api/${project.version}</bundle>
	</feature>
	<feature name="certprofile-example" version="${project.version}" resolver="(obr)">
		<feature>xipki-ca-api</feature>
		<bundle>mvn:org.xipki/ca-certprofile-example/${project.version}</bundle>
	</feature>
	<feature name="xipki-caserver" version="${project.version}" resolver="(obr)">
		<feature>mysql</feature>
		<feature>jdbc-db2</feature>
		<feature>xipki-datasource</feature>
		<feature>xipki-security</feature>
		<feature>xipki-ca-api</feature>
		<bundle>mvn:org.xipki/ca-cmp/${project.version}</bundle>
		<bundle>mvn:org.xipki/ca-server/${project.version}</bundle>
	</feature>
	<feature name="xipki-caserver-shell" version="${project.version}" resolver="(obr)">
		<feature>xipki-caserver</feature>
		<bundle>mvn:org.xipki/ca-server-shell/${project.version}</bundle>
	</feature>
	<feature name="xipki-caclient" version="${project.version}" resolver="(obr)">
		<feature>xipki-security</feature>
		<bundle>mvn:org.xipki/ca-cmp/${project.version}</bundle>
		<bundle>mvn:org.xipki/ca-common/${project.version}</bundle>
		<bundle>mvn:org.xipki/ca-api/${project.version}</bundle>
		<bundle>mvn:org.xipki/datasource-api/${project.version}</bundle>
		<bundle>mvn:org.xipki/ca-client-api/${project.version}</bundle>
		<bundle>mvn:org.xipki/ca-client-impl/${project.version}</bundle>
	</feature>
	<feature name="xipki-caclient-shell" version="${project.version}" resolver="(obr)">
		<feature>xipki-caclient</feature>
		<bundle>mvn:org.xipki/ca-client-shell/${project.version}</bundle>
	</feature>
	<feature name="xipki-security-shell" version="${project.version}" resolver="(obr)">
		<feature>xipki-security</feature>
		<bundle>mvn:org.xipki/security-command/${project.version}</bundle>
		<bundle>mvn:org.xipki/security-shell/${project.version}</bundle>
	</feature>
	<feature name="xipki-ocspserver" version="${project.version}" resolver="(obr)">
		<feature>mysql</feature>
		<feature>jdbc-db2</feature>
		<feature>xipki-datasource</feature>
		<feature>xipki-security</feature>
		<bundle>mvn:org.xipki/ocsp-api/${project.version}</bundle>
		<bundle>mvn:org.xipki/ocsp-server/${project.version}</bundle>
	</feature>
	<feature name="xipki-ocspclient" version="${project.version}" resolver="(obr)">
		<feature>bouncycastle</feature>
		<bundle>mvn:org.xipki/ocsp-client-api/${project.version}</bundle>
		<bundle>mvn:org.xipki/ocsp-client-impl/${project.version}</bundle>
	</feature>
	<feature name="xipki-ocspclient-shell" version="${project.version}" resolver="(obr)">
		<feature>xipki-ocspclient</feature>
		<bundle>mvn:org.xipki/ocsp-client-shell/${project.version}</bundle>
	</feature>
</features>
